<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Админ-панель | Управление пользователями</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/css/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.10.0/font/bootstrap-icons.css">
    <link rel="stylesheet" href="admin.css">
</head>
<body>
    <!-- Боковое меню -->
    <div class="sidebar" id="sidebar">
        <div class="sidebar-header">
            <div class="sidebar-logo">
                <img src="vk-logo.png" alt="Логотип" class="logo-img">
                <span class="logo-text">Admin</span>
            </div>
            <button class="sidebar-toggle d-md-none" id="sidebarToggle">
                <i class="bi bi-x-lg"></i>
            </button>
        </div>
        <ul class="sidebar-menu">
            <li class="menu-item active">
                <a href="#" data-page="dashboard">
                    <i class="bi bi-speedometer2"></i>
                    <span>Дашборд</span>
                </a>
            </li>
            <li class="menu-item">
                <a href="#" data-page="users">
                    <i class="bi bi-people-fill"></i>
                    <span>Пользователи</span>
                </a>
            </li>
            <li class="menu-item">
                <a href="#" data-page="analytics">
                    <i class="bi bi-bar-chart-fill"></i>
                    <span>Аналитика</span>
                </a>
            </li>
            <li class="menu-item">
                <a href="#" data-page="settings">
                    <i class="bi bi-gear-fill"></i>
                    <span>Настройки</span>
                </a>
            </li>
        </ul>
        <div class="sidebar-footer">
            <a href="#" id="logoutBtn">
                <i class="bi bi-box-arrow-left"></i>
                <span>Выход</span>
            </a>
        </div>
    </div>

    <!-- Основной контент -->
    <div class="main-content">
        <!-- Верхняя панель -->
        <header class="top-bar">
            <button class="sidebar-toggle d-md-none" id="showSidebar">
                <i class="bi bi-list"></i>
            </button>
            
            <div class="search-box">
                <i class="bi bi-search"></i>
                <input type="text" placeholder="Поиск..." id="searchInput">
            </div>
            
            <div class="top-bar-right">
                <div class="top-bar-item">
                    <i class="bi bi-bell"></i>
                    <span class="badge">3</span>
                </div>
                <div class="top-bar-item">
                    <i class="bi bi-envelope"></i>
                    <span class="badge">5</span>
                </div>
                <div class="user-profile">
                    <span class="user-name">Администратор</span>
                    <img src="https://via.placeholder.com/40" alt="Профиль" class="user-avatar">
                </div>
            </div>
        </header>

        <!-- Контейнер страниц -->
        <div class="page-container">
            <!-- Дашборд -->
            <div class="page active" id="page-dashboard">
                <h1 class="page-title">Дашборд</h1>
                
                <div class="stats-container">
                    <div class="stat-card">
                        <div class="stat-icon bg-primary">
                            <i class="bi bi-people-fill"></i>
                        </div>
                        <div class="stat-details">
                            <h3 class="stat-value" id="totalUsers">0</h3>
                            <p class="stat-label">Всего пользователей</p>
                        </div>
                    </div>
                    
                    <div class="stat-card">
                        <div class="stat-icon bg-success">
                            <i class="bi bi-calendar-check"></i>
                        </div>
                        <div class="stat-details">
                            <h3 class="stat-value" id="todayUsers">0</h3>
                            <p class="stat-label">Новых сегодня</p>
                        </div>
                    </div>
                    
                    <div class="stat-card">
                        <div class="stat-icon bg-info">
                            <i class="bi bi-geo-alt-fill"></i>
                        </div>
                        <div class="stat-details">
                            <h3 class="stat-value" id="uniqueCities">0</h3>
                            <p class="stat-label">Уникальных городов</p>
                        </div>
                    </div>
                    
                    <div class="stat-card">
                        <div class="stat-icon bg-warning">
                            <i class="bi bi-graph-up"></i>
                        </div>
                        <div class="stat-details">
                            <h3 class="stat-value">75%</h3>
                            <p class="stat-label">Конверсия анкет</p>
                        </div>
                    </div>
                </div>
                
                <div class="chart-container">
                    <div class="chart-card">
                        <div class="chart-header">
                            <h3 class="chart-title">Регистрации по дням</h3>
                            <div class="chart-actions">
                                <button class="btn-icon">
                                    <i class="bi bi-three-dots-vertical"></i>
                                </button>
                            </div>
                        </div>
                        <div class="chart-body">
                            <canvas id="registrationsChart"></canvas>
                        </div>
                    </div>
                    
                    <div class="chart-card">
                        <div class="chart-header">
                            <h3 class="chart-title">Популярные города</h3>
                            <div class="chart-actions">
                                <button class="btn-icon">
                                    <i class="bi bi-three-dots-vertical"></i>
                                </button>
                            </div>
                        </div>
                        <div class="chart-body">
                            <canvas id="citiesChart"></canvas>
                        </div>
                    </div>
                </div>
                
                <div class="recent-users-container">
                    <div class="section-header">
                        <h3 class="section-title">Недавние пользователи</h3>
                        <a href="#" class="section-link" data-page="users">Смотреть всех</a>
                    </div>
                    
                    <div class="table-responsive">
                        <table class="table table-hover">
                            <thead>
                                <tr>
                                    <th>ФИО</th>
                                    <th>Город</th>
                                    <th>Дата рождения</th>
                                    <th>Телефон</th>
                                    <th>Дата регистрации</th>
                                </tr>
                            </thead>
                            <tbody id="recentUsersTable">
                                <!-- Данные будут загружены из JS -->
                            </tbody>
                        </table>
                    </div>
                </div>
            </div>
            
            <!-- Страница пользователей -->
            <div class="page" id="page-users">
                <div class="page-header">
                    <h1 class="page-title">Управление пользователями</h1>
                    <div class="page-actions">
                        <button class="btn btn-primary" id="exportUsersBtn">
                            <i class="bi bi-download"></i> Экспорт
                        </button>
                        <button class="btn btn-danger" id="deleteAllUsersBtn">
                            <i class="bi bi-trash"></i> Удалить все
                        </button>
                    </div>
                </div>
                
                <div class="filter-container">
                    <div class="row g-3">
                        <div class="col-md-3">
                            <select class="form-select" id="filterCity">
                                <option value="">Город (все)</option>
                            </select>
                        </div>
                        <div class="col-md-3">
                            <select class="form-select" id="filterAgeRange">
                                <option value="">Возраст (все)</option>
                                <option value="18-25">18-25 лет</option>
                                <option value="26-35">26-35 лет</option>
                                <option value="36-50">36-50 лет</option>
                                <option value="51+">51+ лет</option>
                            </select>
                        </div>
                        <div class="col-md-3">
                            <input type="date" class="form-control" id="filterDate" placeholder="Дата регистрации">
                        </div>
                        <div class="col-md-3">
                            <button class="btn btn-primary" id="applyFiltersBtn">Применить</button>
                            <button class="btn btn-outline-secondary" id="resetFiltersBtn">Сбросить</button>
                        </div>
                    </div>
                </div>
                
                <div class="table-responsive mt-4">
                    <table class="table table-hover">
                        <thead>
                            <tr>
                                <th>
                                    <input type="checkbox" id="selectAllUsers">
                                </th>
                                <th>ФИО</th>
                                <th>Город</th>
                                <th>Дата рождения</th>
                                <th>Возраст</th>
                                <th>Телефон</th>
                                <th>Дата регистрации</th>
                                <th>Действия</th>
                            </tr>
                        </thead>
                        <tbody id="usersTable">
                            <!-- Данные будут загружены из JS -->
                        </tbody>
                    </table>
                </div>
                
                <div class="pagination-container">
                    <div class="pagination-info">
                        Показано <span id="shownUsers">0</span> из <span id="totalUsersCount">0</span> пользователей
                    </div>
                    <ul class="pagination" id="usersPagination">
                        <!-- Пагинация будет сгенерирована JS -->
                    </ul>
                </div>
            </div>
            
            <!-- Аналитика -->
            <div class="page" id="page-analytics">
                <h1 class="page-title">Аналитика</h1>
                
                <div class="row">
                    <div class="col-lg-6">
                        <div class="chart-card">
                            <div class="chart-header">
                                <h3 class="chart-title">Распределение по возрастам</h3>
                            </div>
                            <div class="chart-body">
                                <canvas id="ageDistributionChart"></canvas>
                            </div>
                        </div>
                    </div>
                    
                    <div class="col-lg-6">
                        <div class="chart-card">
                            <div class="chart-header">
                                <h3 class="chart-title">Популярные города</h3>
                            </div>
                            <div class="chart-body">
                                <canvas id="cityDistributionChart"></canvas>
                            </div>
                        </div>
                    </div>
                </div>
                
                <div class="row mt-4">
                    <div class="col-lg-12">
                        <div class="chart-card">
                            <div class="chart-header">
                                <h3 class="chart-title">Динамика регистраций</h3>
                            </div>
                            <div class="chart-body">
                                <canvas id="registrationTrendsChart"></canvas>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            
            <!-- Настройки -->
            <div class="page" id="page-settings">
                <h1 class="page-title">Настройки</h1>
                
                <div class="settings-container">
                    <div class="settings-section">
                        <h3 class="settings-title">Общие настройки</h3>
                        
                        <div class="settings-form">
                            <div class="form-group">
                                <label for="siteTitle">Название сайта</label>
                                <input type="text" id="siteTitle" class="form-control" value="Телеграм бот с формой">
                            </div>
                            
                            <div class="form-group">
                                <label for="adminEmail">Email администратора</label>
                                <input type="email" id="adminEmail" class="form-control" value="admin@example.com">
                            </div>
                            
                            <div class="form-group">
                                <label>Очистка данных</label>
                                <div class="form-check">
                                    <input class="form-check-input" type="checkbox" id="autoDeleteOldUsers">
                                    <label class="form-check-label" for="autoDeleteOldUsers">
                                        Автоматически удалять пользователей старше 1 года
                                    </label>
                                </div>
                            </div>
                        </div>
                    </div>
                    
                    <div class="settings-section">
                        <h3 class="settings-title">Настройки уведомлений</h3>
                        
                        <div class="settings-form">
                            <div class="form-group">
                                <div class="form-check form-switch">
                                    <input class="form-check-input" type="checkbox" id="emailNotifications" checked>
                                    <label class="form-check-label" for="emailNotifications">
                                        Email-уведомления о новых пользователях
                                    </label>
                                </div>
                            </div>
                            
                            <div class="form-group">
                                <div class="form-check form-switch">
                                    <input class="form-check-input" type="checkbox" id="telegramNotifications" checked>
                                    <label class="form-check-label" for="telegramNotifications">
                                        Уведомления в Telegram
                                    </label>
                                </div>
                            </div>
                        </div>
                    </div>
                    
                    <div class="settings-section">
                        <h3 class="settings-title">Настройки безопасности</h3>
                        
                        <div class="settings-form">
                            <div class="form-group">
                                <label for="newPassword">Новый пароль</label>
                                <input type="password" id="newPassword" class="form-control">
                            </div>
                            
                            <div class="form-group">
                                <label for="confirmPassword">Подтвердите пароль</label>
                                <input type="password" id="confirmPassword" class="form-control">
                            </div>
                        </div>
                    </div>
                    
                    <div class="settings-actions">
                        <button class="btn btn-primary" id="saveSettingsBtn">Сохранить настройки</button>
                        <button class="btn btn-outline-secondary">Отмена</button>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Модальное окно для просмотра/редактирования пользователя -->
    <div class="modal fade" id="userModal" tabindex="-1" aria-hidden="true">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title">Информация о пользователе</h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                </div>
                <div class="modal-body">
                    <form id="userEditForm">
                        <input type="hidden" id="userId">
                        <div class="mb-3">
                            <label for="editFullName" class="form-label">ФИО</label>
                            <input type="text" class="form-control" id="editFullName" required>
                        </div>
                        <div class="mb-3">
                            <label for="editCity" class="form-label">Город</label>
                            <input type="text" class="form-control" id="editCity" required>
                        </div>
                        <div class="mb-3">
                            <label for="editBirthDate" class="form-label">Дата рождения</label>
                            <input type="date" class="form-control" id="editBirthDate" required>
                        </div>
                        <div class="mb-3">
                            <label for="editPhoneNumber" class="form-label">Телефон</label>
                            <input type="tel" class="form-control" id="editPhoneNumber" required>
                        </div>
                    </form>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Закрыть</button>
                    <button type="button" class="btn btn-danger" id="deleteUserBtn">Удалить</button>
                    <button type="button" class="btn btn-primary" id="saveUserBtn">Сохранить</button>
                </div>
            </div>
        </div>
    </div>

    <!-- Модальное окно подтверждения -->
    <div class="modal fade" id="confirmModal" tabindex="-1" aria-hidden="true">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title">Подтверждение</h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                </div>
                <div class="modal-body">
                    <p id="confirmMessage">Вы уверены, что хотите выполнить это действие?</p>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Отмена</button>
                    <button type="button" class="btn btn-danger" id="confirmActionBtn">Подтвердить</button>
                </div>
            </div>
        </div>
    </div>

    <!-- Скрипты -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/js/bootstrap.bundle.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <script src="admin.js"></script>
</body>
</html>
